// Symptom Bubble Chart (unchanged)
            const symptomBubbleCtx = document.getElementById('symptomBubbleChart').getContext('2d');

            function getSymptomBubbleData(emotionData, emtionColorMap, emotionLabelOrder) {
                const emotionCounts = emotionData.reduce((acc, item) => {
                    acc[item.name] = item.count;
                    return acc;
                }, {});
                return emotionLabelOrder.map((emtion, index) => ({
                    x: index,
                    y: 0,
                    r: (emotionCounts[emotion] || 0) * 5,
                    count: emotionCounts[emotion] || 0,
                    emotionName: emotion
                }));
            }

            const emotionBubbleChart = new Chart(emotionBubbleCtx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'Emotions',
                        data: getEmotionBubbleData(weekEmotionData, emtionColorsWeek, currentEmotionOrder),
                        backgroundColor: function(context) {
                            const emotionName = currentEmotionOrder[context.dataIndex];
                            return currentEmotionColors[emotionName] || 'rgba(52, 152, 219, 0.5)';
                        },
                        borderColor: 'rgba(231, 76, 60, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            type: 'category',
                            labels: currentEmotionOrder,
                            ticks: { autoSkip: false }
                        },
                        y: { display: false }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const emotion = currentEmotionOrder[context.dataIndex];
                                    const count = context.raw.count;
                                    return `${symptom}: ${count}`;
                                }
                            }
                        }
                    }
                }
            });